"use strict";(self.webpackChunksemana_9=self.webpackChunksemana_9||[]).push([[6670],{2155:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"politicas-contenido","title":"Pol\xedticas de Seguridad de Contenido","description":"Las pol\xedticas de seguridad de contenido (CSP) proporcionan una capa adicional de seguridad para detectar y mitigar ciertos tipos de ataques, incluyendo Cross-Site Scripting (XSS) e inyecciones de datos.","source":"@site/security/politicas-contenido.md","sourceDirName":".","slug":"/politicas-contenido","permalink":"/security/politicas-contenido","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"politicas-contenido","sidebar_position":4},"sidebar":"docs","previous":{"title":"\u26a0\ufe0f Contenido Mixto","permalink":"/security/contenido-mixto"},"next":{"title":"\ud83d\udd11 Headers de Seguridad","permalink":"/security/headers-seguridad"}}');var r=n(4848),d=n(8453);const c={id:"politicas-contenido",sidebar_position:4},l="Pol\xedticas de Seguridad de Contenido",o={},t=[{value:"Fundamentos de CSP",id:"fundamentos-de-csp",level:2},{value:"Configuraci\xf3n y an\xe1lisis en el inspector",id:"configuraci\xf3n-y-an\xe1lisis-en-el-inspector",level:2},{value:"Directivas principales",id:"directivas-principales",level:2},{value:"Valores comunes",id:"valores-comunes",level:2},{value:"Modo de reporte",id:"modo-de-reporte",level:2},{value:"An\xe1lisis de violaciones",id:"an\xe1lisis-de-violaciones",level:2},{value:"Depuraci\xf3n de problemas comunes",id:"depuraci\xf3n-de-problemas-comunes",level:2},{value:"Implementaci\xf3n gradual",id:"implementaci\xf3n-gradual",level:2},{value:"Herramientas de diagn\xf3stico",id:"herramientas-de-diagn\xf3stico",level:2},{value:"Mejores pr\xe1cticas",id:"mejores-pr\xe1cticas",level:2}];function a(e){const i={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"pol\xedticas-de-seguridad-de-contenido",children:"Pol\xedticas de Seguridad de Contenido"})}),"\n",(0,r.jsx)(i.p,{children:"Las pol\xedticas de seguridad de contenido (CSP) proporcionan una capa adicional de seguridad para detectar y mitigar ciertos tipos de ataques, incluyendo Cross-Site Scripting (XSS) e inyecciones de datos."}),"\n",(0,r.jsx)(i.h2,{id:"fundamentos-de-csp",children:"Fundamentos de CSP"}),"\n",(0,r.jsx)(i.p,{children:"Content Security Policy funciona declarando qu\xe9 recursos pueden ser cargados y ejecutados en una p\xe1gina web. Estas directivas se env\xedan mediante:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Headers HTTP"}),"\n",(0,r.jsx)(i.li,{children:"Meta tags HTML"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"configuraci\xf3n-y-an\xe1lisis-en-el-inspector",children:"Configuraci\xf3n y an\xe1lisis en el inspector"}),"\n",(0,r.jsx)(i.p,{children:"Para verificar las pol\xedticas CSP de un sitio:"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"Abre el panel Security/Seguridad"}),"\n",(0,r.jsx)(i.li,{children:'Selecciona la secci\xf3n "Content Security Policy"'}),"\n",(0,r.jsx)(i.li,{children:"Revisa las directivas implementadas y sus efectos"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"directivas-principales",children:"Directivas principales"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Directiva"}),(0,r.jsx)(i.th,{children:"Descripci\xf3n"}),(0,r.jsx)(i.th,{children:"Ejemplo"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"default-src"})}),(0,r.jsx)(i.td,{children:"Directiva comod\xedn para recursos no especificados"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"default-src 'self'"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"script-src"})}),(0,r.jsx)(i.td,{children:"Controla scripts v\xe1lidos"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"script-src 'self' https://apis.google.com"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"style-src"})}),(0,r.jsx)(i.td,{children:"Controla hojas de estilo"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"style-src 'self' https://fonts.googleapis.com"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"img-src"})}),(0,r.jsx)(i.td,{children:"Controla im\xe1genes"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"img-src 'self' https://img.ejemplo.com"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"connect-src"})}),(0,r.jsx)(i.td,{children:"Controla destinos de conexiones"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"connect-src 'self' https://api.ejemplo.com"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"font-src"})}),(0,r.jsx)(i.td,{children:"Controla fuentes web"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"font-src 'self' https://fonts.gstatic.com"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"frame-src"})}),(0,r.jsx)(i.td,{children:"Controla iframes"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"frame-src 'self' https://youtube.com"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"report-uri"})}),(0,r.jsx)(i.td,{children:"Endpoint para informes de violaciones"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"report-uri /csp-report-endpoint"})})]})]})]}),"\n",(0,r.jsx)(i.h2,{id:"valores-comunes",children:"Valores comunes"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"'self'"}),": Permite recursos del mismo origen"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"'none'"}),": No permite ning\xfan recurso"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"'unsafe-inline'"}),": Permite c\xf3digo inline (evitar si es posible)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"'unsafe-eval'"}),": Permite eval() (evitar si es posible)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"'nonce-{random}'"}),": Permite scripts con nonce espec\xedfico"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"'sha256-{hash}'"}),": Permite contenido con hash espec\xedfico"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"modo-de-reporte",children:"Modo de reporte"}),"\n",(0,r.jsx)(i.p,{children:'El "Report-Only" permite probar pol\xedticas sin bloquear contenido:'}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"Content-Security-Policy-Report-Only: default-src 'self'; report-uri /csp-report-endpoint\n"})}),"\n",(0,r.jsx)(i.h2,{id:"an\xe1lisis-de-violaciones",children:"An\xe1lisis de violaciones"}),"\n",(0,r.jsx)(i.p,{children:"Utiliza el inspector para:"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"Detectar violaciones de CSP en la consola"}),"\n",(0,r.jsx)(i.li,{children:"Analizar detalles de bloqueos"}),"\n",(0,r.jsx)(i.li,{children:"Verificar los informes enviados a endpoints"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"depuraci\xf3n-de-problemas-comunes",children:"Depuraci\xf3n de problemas comunes"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Problema"}),(0,r.jsx)(i.th,{children:"Soluci\xf3n"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Scripts bloqueados"}),(0,r.jsxs)(i.td,{children:["Verificar directiva ",(0,r.jsx)(i.code,{children:"script-src"})," e incluir or\xedgenes necesarios"]})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Estilos inline bloqueados"}),(0,r.jsx)(i.td,{children:"Migrar a archivos CSS o usar nonces/hashes"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Im\xe1genes no cargadas"}),(0,r.jsxs)(i.td,{children:["Comprobar ",(0,r.jsx)(i.code,{children:"img-src"})," e incluir CDNs utilizados"]})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Errores de conexi\xf3n API"}),(0,r.jsxs)(i.td,{children:["Actualizar ",(0,r.jsx)(i.code,{children:"connect-src"})," con endpoints de API"]})]})]})]}),"\n",(0,r.jsx)(i.h2,{id:"implementaci\xf3n-gradual",children:"Implementaci\xf3n gradual"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"Comenzar con Report-Only"}),"\n",(0,r.jsx)(i.li,{children:"Analizar los informes de violaciones"}),"\n",(0,r.jsx)(i.li,{children:"Ajustar las directivas seg\xfan sea necesario"}),"\n",(0,r.jsx)(i.li,{children:"Implementar la pol\xedtica en modo de aplicaci\xf3n"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"herramientas-de-diagn\xf3stico",children:"Herramientas de diagn\xf3stico"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Consola de desarrollador"}),": Muestra infracciones detalladas"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Panel Network"}),": Verifica headers CSP enviados"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Generadores de pol\xedticas"}),": CSP Evaluator, Report-URI CSP Builder"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Laboratorios de pruebas"}),": CSP Playground"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"mejores-pr\xe1cticas",children:"Mejores pr\xe1cticas"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Evitar 'unsafe-inline' y 'unsafe-eval'"}),"\n",(0,r.jsx)(i.li,{children:"Utilizar nonces o hashes para contenido inline necesario"}),"\n",(0,r.jsx)(i.li,{children:"Implementar CSP junto con otros headers de seguridad"}),"\n",(0,r.jsx)(i.li,{children:"Mantener actualizada la pol\xedtica conforme evoluciona el sitio"}),"\n",(0,r.jsx)(i.li,{children:"Usar report-uri para monitorizar violaciones"}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,d.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>c,x:()=>l});var s=n(6540);const r={},d=s.createContext(r);function c(e){const i=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(d.Provider,{value:i},e.children)}}}]);